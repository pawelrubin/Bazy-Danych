INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (1, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (2, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160203, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (3, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160303, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (31, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160403, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (5, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160503, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (6, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160603, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (7, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160703, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (8, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160803, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (9, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160903, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (10, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20161003, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (11, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (12, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (13, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (32, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (33, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (16, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (39, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (18, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (19, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (20, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (21, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (35, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (23, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (24, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (28, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (29, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (30, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (36, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (38, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));
INSERT INTO kontrakty (aktor, agent, koniec, poczatek, gaza) VALUES (26, (SELECT licencja FROM agenci ORDER BY RAND() LIMIT 1 ), 20160103, 20150103, FLOOR(RAND()*1000 + 1));

delete from kontrakty where ID > 178;
ALTER TABLE `kontrakty` CHANGE `gaza` `gaza` INT(11) COMMENT 'dolary na dzien';

select * from kontrakty;

DELIMITER //
CREATE TRIGGER check_kontrakty BEFORE INSERT ON kontrakty
FOR EACH ROW
BEGIN
    IF (NEW.gaza < 0 OR NEW.koniec < DATE_ADD(NEW.poczatek, INTERVAL 1 DAY)) THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'niepoprawny rekord';
    END IF;
END;//
DELIMITER ;

